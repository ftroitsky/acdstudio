!function(t){t.fn.extend({bond:function(n){function o(t,n){var o;if("undefined"!=typeof document.body.style.transform)o=n[0].style.transform.toString();else if("undefined"!=typeof document.body.style.webkitTransform)o=n[0].style.webkitTransform.toString();else if("undefined"!=typeof document.body.style.mozTransform)o=n[0].style.mozTransform.toString();else{if("undefined"==typeof document.body.style.oTransform)return console.log("Your browser does not support css transforms"),0;o=n[0].style.oTransform.toString()}return parseInt(o.substring(o.indexOf("(")+1).split(",")[t])||0}jQuery.extend(jQuery.easing,{easeOutExpo:function(t,n,o,e,a){return n==a?o+e:e*(-Math.pow(2,-10*n/a)+1)+o}});var e={orientation:"horz",restArea:6,maxSpeed:7,startPos:0,desktopMode:"move",mobileMode:"touchCss",wrapperSelector:".bond-wrapper",boxSelector:".bond-box",slideSelector:".bond-slide",easingCss:"cubic-bezier(0,1,1,1)",easingMargin:"easeOutExpo",timeBounce:"0.01s",timeScroll:"3s",timeBack:"0.5s",maxVelocity:15,bounce:5,slideClickCallback:function(){}};n||(n=e);for(option in e)option in n&&void 0!==n[option]||(n[option]=e[option]);var a=!1,r=null!=navigator.userAgent.match(/iPad/i),i=null!=navigator.userAgent.match(/iPhone/i),s=null!=navigator.userAgent.match(/iPod/i);return(r||i||s)&&(a=!0),this.each(function(){function e(){T="left";var t=parseInt(C.css("left"));t>B-F&&C.css("left",t-S+"px"),g=setTimeout(e,10)}function r(){T="right";var t=parseInt(C.css("left"));0>t&&C.css("left",t+S+"px"),v=setTimeout(r,10)}function i(){T="top";var t=parseInt(C.css("top"));t>B-F&&C.css("top",t-S+"px"),b=setTimeout(i,10)}function s(){T="bottom";var t=parseInt(C.css("top"));0>t&&C.css("top",t+S+"px"),k=setTimeout(s,10)}function c(t){"horz"==n.orientation?p(t):"vert"==n.orientation&&m(t)}function p(o){var a=y.offset().left,i=t(document).scrollLeft(),s=(window.event?event.clientX:o.clientX?o.clientX:"")-(a-i),c=(B-n.restArea)/2,p=(B+n.restArea)/2;s>p?(S=(s-p)/c*n.maxSpeed,clearTimeout(v),"left"!=T&&e()):c>s?(S=(c-s)/c*n.maxSpeed,clearTimeout(g),"right"!=T&&r()):S=0}function m(o){var e=y.offset().top,a=t(document).scrollTop(),r=(window.event?event.clientY:o.clientY?o.clientY:"")-(e-a),c=(B-n.restArea)/2,p=(B+n.restArea)/2;r>p?(S=(r-p)/c*n.maxSpeed,clearTimeout(k),"top"!=T&&i()):c>r?(S=(c-r)/c*n.maxSpeed,clearTimeout(b),"bottom"!=T&&s()):S=0}function u(){"horz"==n.orientation?(clearTimeout(g),clearTimeout(v)):"vert"==n.orientation&&(clearTimeout(b),clearTimeout(k)),T=""}function l(e){if(!a&&2==e.button)return!1;var r=e.originalEvent&&e.originalEvent.touches?e.originalEvent.touches[0]:e;switch(e.stopPropagation(),z=0,M=0,h){case"css":C.css({"-webkit-transition-duration":"0s","-moz-transition-duration":"0s","-o-transition-duration":"0s","transition-duration":"0s"}),"horz"==n.orientation?w=r.pageX-o(0,C):"vert"==n.orientation&&(w=r.pageY-o(1,C));break;case"margin":C.stop(),"horz"==n.orientation?w=r.pageX-parseFloat(C.css("left")):"vert"==n.orientation&&(w=r.pageY-parseFloat(C.css("top")))}return y.bind("mousemove touchmove",function(t){d(t)}),t(document).bind("mouseup touchend",function(t){f(t)}),!1}function d(t){var o=t.originalEvent&&t.originalEvent.touches?t.originalEvent.touches[0]:t;t.preventDefault(),t.stopPropagation(),"horz"==n.orientation?page=o.pageX:"vert"==n.orientation&&(page=o.pageY),M=z-(page-w),z=page-w;var e=z;switch(z>0?e=z>=I?10*Math.sqrt(z-I):0:-F+B>z&&(e=-F+B-10*Math.sqrt(Math.abs(Math.abs(z+(F-B))))),h){case"css":"horz"==n.orientation?C.css({"-webkit-transform":"translate3d("+e+"px, 0px, 0px)","-moz-transform":"translate3d("+e+"px, 0px, 0px)","-o-transform":"translate3d("+e+"px, 0px, 0px)",transform:"translate3d("+e+"px, 0px, 0px)"}):"vert"==n.orientation&&C.css({"-webkit-transform":"translate3d(0px, "+e+"px, 0px)","-moz-transform":"translate3d(0px, "+e+"px, 0px)","-o-transform":"translate3d(0px, "+e+"px, 0px)",transform:"translate3d(0px, "+e+"px, 0px)"});break;case"margin":"horz"==n.orientation?C.css("left",e):"vert"==n.orientation&&C.css("top",e)}return!1}function f(){if(Math.abs(M)>n.maxVelocity){switch(h){case"css":"horz"==n.orientation?coord=o(0,C):"vert"==n.orientation&&(coord=o(1,C));break;case"margin":"horz"==n.orientation?coord=parseFloat(C.css("left")):"vert"==n.orientation&&(coord=parseFloat(C.css("top")))}var e=Math.floor(coord-100*Math.sqrt(Math.abs(M))*M/Math.abs(M)),a=n.timeScroll;switch(e>0?(e=I*n.bounce,a=n.timeBounce):-F+B>e?(e=-F+B-I*n.bounce,a=n.timeBounce):a=n.timeScroll,h){case"css":C.css({"-webkit-transition-timing-function":n.easingCss,"-webkit-transition-duration":a,"-moz-transition-timing-function":n.easingCss,"-moz-transition-duration":a,"-o-transition-timing-function":n.easingCss,"-o-transition-duration":a,"transition-timing-function":n.easingCss,"transition-duration":a}),"horz"==n.orientation?C.css({"-webkit-transform":"translate3d("+e+"px, 0px, 0px)","-moz-transform":"translate3d("+e+"px, 0px, 0px)","-o-transform":"translate3d("+e+"px, 0px, 0px)",transform:"translate3d("+e+"px, 0px, 0px)"}):"vert"==n.orientation&&C.css({"-webkit-transform":"translate3d(0px, "+e+"px, 0px)","-moz-transform":"translate3d(0px, "+e+"px, 0px)","-o-transform":"translate3d(0px, "+e+"px, 0px)",transform:"translate3d(0px, "+e+"px, 0px)"}),C.bind("webkitTransitionEnd mozTransitionEnd oTransitionEnd transitionEnd",x);break;case"margin":"horz"==n.orientation?C.animate({left:e},1e3*parseFloat(a),n.easingMargin,x):"vert"==n.orientation&&C.animate({top:e},1e3*parseFloat(a),n.easingMargin,x)}}else x();return y.unbind("mousemove touchmove"),t(document).unbind("mouseup touchend"),!1}function x(){switch(h){case"css":"horz"==n.orientation?out=o(0,C):"vert"==n.orientation&&(out=o(1,C));break;case"margin":"horz"==n.orientation?out=parseFloat(C.css("left")):"vert"==n.orientation&&(out=parseFloat(C.css("top")))}if(out>0)switch(out>I&&(out=I),h){case"css":C.css({"-webkit-transform":"translate3d(0px, 0px, 0px)","-moz-transform":"translate3d(0px, 0px, 0px)","-o-transform":"translate3d(0px, 0px, 0px)",transform:"translate3d(0px, 0px, 0px)"});break;case"margin":C.animate({left:0,top:0},1e3*parseFloat(n.timeBack),n.easingMargin)}else if(-F+B>out){Math.abs(out-F)>I&&(out=-F-n.maxOut);var t=(F-B).toString();switch(h){case"css":"horz"==n.orientation?C.css({"-webkit-transform":"translate3d(-"+t+"px, 0px, 0px)","-moz-transform":"translate3d(-"+t+"px, 0px, 0px)","-o-transform":"translate3d(-"+t+"px, 0px, 0px)",transform:"translate3d(-"+t+"px, 0px, 0px)"}):"vert"==n.orientation&&C.css({"-webkit-transform":"translate3d(0px, -"+t+"px, 0px)","-moz-transform":"translate3d(0px, -"+t+"px, 0px)","-o-transform":"translate3d(0px, -"+t+"px, 0px)",transform:"translate3d(0px, -"+t+"px, 0px)"});break;case"margin":"horz"==n.orientation?C.animate({left:-t},1e3*parseFloat(n.timeBack),n.easingMargin):"vert"==n.orientation&&C.animate({top:-t},1e3*parseFloat(n.timeBack),n.easingMargin)}}"css"==h&&C.css({"-webkit-transition-timing-function":n.easingCss,"-webkit-transition-duration":n.timeBack,"-moz-transition-timing-function":n.easingCss,"-moz-transition-duration":n.timeBack,"-o-transition-timing-function":n.easingCss,"-o-transition-duration":n.timeBack,"transition-timing-function":n.easingCss,"transition-duration":n.timeBack})}var h,g,b,v,k,w,z,M,S=0,T="",y=t(this),C=y.children(n.wrapperSelector),E=C.children(n.boxSelector),B=0,F=0;"horz"==n.orientation?B=y.width():"vert"==n.orientation&&(B=y.height()),E.children(n.slideSelector).each(function(){"horz"==n.orientation?F+=t(this).width()+parseInt(t(this).css("margin-left"))+parseInt(t(this).css("margin-right")):"vert"==n.orientation&&(F+=t(this).height()+parseInt(t(this).css("margin-top"))+parseInt(t(this).css("margin-bottom")))});var I=Math.floor(Math.sqrt(F)/2);switch(a){case!1:switch(n.desktopMode){case"move":h="move",y.bind("mousemove",function(t){c(t)}),y.bind("mouseleave",function(t){u(t)});break;case"touchCss":h="css",y.bind("mousedown touchstart",function(t){l(t)}),C.bind("mousedown",function(t){t.preventDefault(),l(t)}),y.find("a").bind("click",function(){return 0!=z?!1:void 0});break;case"touchMargin":h="margin",y.bind("mousedown touchstart",function(t){l(t)}),C.bind("mousedown",function(t){t.preventDefault(),l(t)}),y.find("a").bind("click",function(){return 0!=z?!1:void 0})}break;case!0:switch(n.mobileMode){case"touchCss":h="css",y.bind("mousedown touchstart",function(t){l(t)}),y.find("a").bind("click",function(){return 0!=z?!1:void 0});break;case"touchMargin":h="margin",y.bind("mousedown touchstart",function(t){l(t)}),y.find("a").bind("click",function(){return 0!=z?!1:void 0})}}if(0!=n.startPos)var A=((B-F)/n.startPos).toString();else var A=0;switch(h){case"css":switch(n.orientation){case"horz":C.css({"-webkit-transform":"translate3d("+A+"px, 0px, 0px)","-moz-transform":"translate3d("+A+"px, 0px, 0px)","-o-transform":"translate3d("+A+"px, 0px, 0px)",transform:"translate3d("+A+"px, 0px, 0px)"});break;case"vert":C.css({"-webkit-transform":"translate3d(0px, "+A+"px, 0px)","-moz-transform":"translate3d(0px, "+A+"px, 0px)","-o-transform":"translate3d(0px, "+A+"px, 0px)",transform:"translate3d(0px, "+A+"px, 0px)"})}break;case"move":case"margin":switch(n.orientation){case"horz":C.css("left",A+"px");break;case"vert":C.css("top",A+"px")}}E.children(n.slideSelector).click(function(){N=E.children(n.slideSelector).index(this),n.slideClickCallback(N,z)})})}})}(jQuery);